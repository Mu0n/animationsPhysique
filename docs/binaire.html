<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Binary Notation & IPv4 Editor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    .section {
      margin-bottom: 40px;
    }
    .bit-row {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .bit-button {
      width: 40px;
      height: 40px;
      margin: 5px;
      font-size: 18px;
      cursor: pointer;
    }
    .value-label {
      width: 40px;
      margin: 5px;
      font-size: 16px;
      text-align: center;
    }
    .output {
      font-size: 24px;
      margin-top: 20px;
    }
    .controls {
      margin-top: 10px;
    }
    .clear-button {
      padding: 6px 12px;
      font-size: 14px;
      cursor: pointer;
    }
    .inverted {
      background-color: black;
      color: white;
    }
  </style>
</head>
<body>

  <!-- 4-bit Section -->
  <div class="section">
    <h2>Nombre binaire à 4 bits</h2>
    <div class="bit-row" id="bitButtons4"></div>
    <div class="bit-row" id="valueLabels4"></div>
    <div class="output">
      <p>Décimal: <span id="decimalOutput4">0</span></p>
    </div>
    <div class="controls">
      <button class="clear-button" onclick="clearBits(4)">Remise à zéro</button>
    </div>
  </div>

  <!-- 8-bit Section -->
  <div class="section">
    <h2>Nombre binaire à 8 bits</h2>
    <div class="bit-row" id="bitButtons8"></div>
    <div class="bit-row" id="valueLabels8"></div>
    <div class="output">
      <p>Décimal: <span id="decimalOutput8">0</span></p>
    </div>
    <div class="controls">
      <button class="clear-button" onclick="clearBits(8)">Remise à zéro</button>
    </div>
  </div>

  <!-- 12-bit Section -->
  <div class="section">
    <h2>Nombre binaire à 12 bits</h2>
    <div class="bit-row" id="bitButtons12"></div>
    <div class="bit-row" id="valueLabels12"></div>
    <div class="output">
      <p>Décimal: <span id="decimalOutput12">0</span></p>
    </div>
    <div class="controls">
      <button class="clear-button" onclick="clearBits(12)">Remise à zéro</button>
    </div>
  </div>

  <!-- IPv4 Bit Editor -->
  <div class="section">
    <h2>Adresse IPv4 (bit par bit)</h2>
    <div class="bit-row" id="ipv4BitsRow"></div>
    <div class="output">
      <p>IPv4: <span id="ipv4Output">0.0.0.0</span></p>
    </div>
    <div class="controls">
      <button class="clear-button" onclick="clearIPv4()">Remise à zéro</button>
    </div>
  </div>

  <script>
    const sectionMap = {};

    function createBitSection(bitCount, containerId, labelId, decimalId) {
      const container = document.getElementById(containerId);
      const labelContainer = document.getElementById(labelId);
      const decimalOutput = document.getElementById(decimalId);

      const bits = Array(bitCount).fill(0);
      const buttons = [];

      function updateDisplay() {
        const binaryStr = bits.join('');
        decimalOutput.textContent = parseInt(binaryStr, 2);
      }

      for (let i = 0; i < bitCount; i++) {
        const btn = document.createElement('button');
        btn.className = 'bit-button';
        btn.textContent = '0';
        btn.onclick = () => {
          bits[i] = bits[i] === 0 ? 1 : 0;
          btn.textContent = bits[i];
          btn.classList.toggle('inverted', bits[i] === 1);
          updateDisplay();
        };
        container.appendChild(btn);
        buttons.push(btn);

        const value = Math.pow(2, bitCount - 1 - i);
        const label = document.createElement('div');
        label.className = 'value-label';
        label.textContent = value;
        labelContainer.appendChild(label);

        if ((i + 1) % 4 === 0 && i !== bitCount - 1) {
          const spacerBtn = document.createElement('div');
          spacerBtn.style.width = '16px';
          container.appendChild(spacerBtn);

          const spacerLabel = document.createElement('div');
          spacerLabel.style.width = '16px';
          labelContainer.appendChild(spacerLabel);
        }
      }

      sectionMap[bitCount] = { bits, buttons, updateDisplay };
      updateDisplay();
    }

    function clearBits(bitCount) {
      const section = sectionMap[bitCount];
      if (!section) return;
      for (let i = 0; i < bitCount; i++) {
        section.bits[i] = 0;
        section.buttons[i].textContent = '0';
        section.buttons[i].classList.remove('inverted');
      }
      section.updateDisplay();
    }

    // IPv4 logic
    const ipv4BitsRow = document.getElementById('ipv4BitsRow');
    const ipv4Output = document.getElementById('ipv4Output');
    const ipv4Bits = [];
    const ipv4Buttons = [];

    function createIPv4Editor() {
      for (let octet = 0; octet < 4; octet++) {
        const bits = Array(8).fill(0);
        const buttons = [];

        for (let i = 0; i < 8; i++) {
          const btn = document.createElement('button');
          btn.className = 'bit-button';
          btn.textContent = '0';
          btn.onclick = () => {
            bits[i] = bits[i] === 0 ? 1 : 0;
            btn.textContent = bits[i];
            btn.classList.toggle('inverted', bits[i] === 1);
            updateIPv4Display();
          };
          ipv4BitsRow.appendChild(btn);
          buttons.push(btn);
        }

        ipv4Bits.push(bits);
        ipv4Buttons.push(buttons);

        if (octet < 3) {
          const dot = document.createElement('div');
          dot.textContent = '●';
          dot.style.fontSize = '32px';
          dot.style.margin = '0 12px';
          dot.style.alignSelf = 'center';
          ipv4BitsRow.appendChild(dot);
        }
      }

      updateIPv4Display();
    }

    function updateIPv4Display() {
      const ip = ipv4Bits.map(bits => parseInt(bits.join(''), 2));
      ipv4Output.textContent = ip.join('.');
    }

    function clearIPv4() {
      for (let o = 0; o < 4; o++) {
        for (let b = 0; b < 8; b++) {
          ipv4Bits[o][b] = 0;
          ipv4Buttons[o][b].textContent = '0';
          ipv4Buttons[o][b].classList.remove('inverted');
        }
      }
      updateIPv4Display();
    }

    // Initialize all sections
    createBitSection(4, 'bitButtons4', 'valueLabels4', 'decimalOutput4');
    createBitSection(8, 'bitButtons8', 'valueLabels8', 'decimalOutput8');
    createBitSection(12, 'bitButtons12', 'valueLabels12', 'decimalOutput12');
    createIPv4Editor();
  </script>
</body>
</html>